<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado 1</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        let questions = [];
        let currentQuestionIndex = 0;
        let answers = [];

        // Função para iniciar o cronômetro
        function startTimer(duration, display) {
            let timer = duration, minutes, seconds;
            setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    timer = 0;
                    submitAnswer();
                }
            }, 1000);
        }

        // Função para obter questões e iniciar o simulado
        function startSimulado() {
            fetch('questions_simulado1.json') // Alterado para o novo nome do arquivo
                .then(response => response.json())
                .then(data => {
                    questions = data;
                    currentQuestionIndex = 0;
                    answers = [];
                    document.getElementById('result-container').classList.add('hidden');
                    showQuestion();
                    let time = 45 * 60; // 45 minutos
                    let display = document.querySelector('#timer');
                    startTimer(time, display);
                });
        }

        // Função para exibir a pergunta atual
        function showQuestion() {
            if (questions.length === 0) return;

            let question = questions[currentQuestionIndex];
            document.getElementById('question-text').textContent = question.question;
            let answersContainer = document.getElementById('answers-container');
            answersContainer.innerHTML = '';

            question.answers.forEach((answer, index) => {
                let label = document.createElement('label');
                label.classList.add('answer-label'); // Adiciona a classe de estilo para alinhar
                let input = document.createElement('input');
                input.type = 'radio';
                input.name = 'answer';
                input.value = index;
                label.appendChild(input);
                label.appendChild(document.createTextNode(` ${String.fromCharCode(65 + index)}. ${answer}`));
                answersContainer.appendChild(label);
            });

            document.getElementById('question-container').classList.remove('hidden');
            document.getElementById('result-container').classList.add('hidden');
        }

        // Função para ir para a próxima pergunta
        function nextQuestion() {
            let selectedOption = document.querySelector('input[name="answer"]:checked');
            if (selectedOption) {
                answers[currentQuestionIndex] = parseInt(selectedOption.value);
                currentQuestionIndex++;
                if (currentQuestionIndex >= questions.length) {
                    showResult();
                } else {
                    showQuestion();
                }
            } else {
                alert('Por favor, selecione uma resposta.');
            }
        }

        // Função para mostrar o resultado
        function showResult() {
            // Envia os resultados para a página de resultado
            const results = {
                questions: questions,
                answers: answers
            };
            const resultsData = encodeURIComponent(JSON.stringify(results));
            window.location.href = `resultado.html?results=${resultsData}`;
        }

        // Função para reiniciar o simulado
        function restartSimulado() {
            window.location.href = 'index.html'; // Redireciona para a página inicial
        }

        // Função para cancelar o simulado
        function cancelSimulado() {
            if (confirm('Tem certeza de que deseja cancelar o simulado?')) {
                window.location.href = 'index.html'; // Redireciona para a página inicial ou uma página de cancelamento
            }
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            startSimulado();
        });
    </script>
</head>
<body>
    <div class="container">
        <div id="timer-container">
            Tempo restante: <span id="timer"></span>
        </div>
        <div id="question-container" class="hidden">
            <h1 id="question-text"></h1>
            <form id="question-form">
                <div id="answers-container" class="answers"></div>
                <button type="button" id="next-button" class="button" onclick="nextQuestion()">Próxima Pergunta</button>
            </form>
        </div>
        <div id="result-container" class="hidden">
            <h2 id="result-text"></h2>
            <div id="results-details"></div>
            <button id="restart-button" class="button" onclick="restartSimulado()">Escolher Prova</button>
        </div>
        <!-- Botão de cancelamento adicionado -->
        <button id="cancel-button" class="button" onclick="cancelSimulado()">Cancelar Prova</button>
    </div>
</body>
</html>
